% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/klimo_synapser.R
\name{syn_request}
\alias{syn_request}
\title{Perform a Synapse REST request}
\usage{
syn_request(
  method,
  path,
  query = NULL,
  body = NULL,
  body_json = TRUE,
  headers = list(),
  token = NULL,
  retry = TRUE,
  verbose = FALSE,
  dry_run = FALSE
)
}
\arguments{
\item{method}{HTTP method (e.g., `"GET"`, `"POST"`, `"PUT"`).}

\item{path}{Path starting with `/` (e.g., `"/repo/v1/entity/syn123"`).}

\item{query}{Optional named list of query parameters.}

\item{body}{Optional request body.}

\item{body_json}{If `TRUE`, encode body as JSON and set content-type accordingly.}

\item{headers}{Optional named list of extra headers.}

\item{token}{Optional Synapse token (PAT). If `NULL`, env vars are used.}

\item{retry}{Logical; retry transient failures when `TRUE`.}

\item{verbose}{Logical; emit request/response progress messages.}

\item{dry_run}{Logical; do not execute the request, return a description instead.}
}
\value{
For JSON: a list (parsed JSON). For non-JSON: a character string body.
}
\description{
Low-level HTTP wrapper around Synapse endpoints using \pkg{httr2}.
}
\details{
- Adds Authorization header using a PAT (see [syn_resolve_token()]).
- Retries transient failures (network, HTTP 429, HTTP 5xx) with exponential backoff.
- Parses JSON responses when content-type indicates JSON; otherwise returns text.
}
\examples{
\dontrun{
tok <- syn_resolve_token()
ent <- syn_request("GET", "/repo/v1/entity/syn123", token = tok)
str(ent)
}
}

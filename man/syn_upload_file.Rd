% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/klimo_synapser.R
\name{syn_upload_file}
\alias{syn_upload_file}
\title{Upload a local file to Synapse (multipart) and create/update a FileEntity}
\usage{
syn_upload_file(
  local_path,
  parent_id,
  name = NULL,
  contentType = NULL,
  md5 = TRUE,
  overwrite = FALSE,
  description = NULL,
  annotations = NULL,
  token = NULL,
  verbose = FALSE,
  dry_run = FALSE
)
}
\arguments{
\item{local_path}{Path to an existing local file.}

\item{parent_id}{Parent container synId (Project or Folder).}

\item{name}{Optional name for the FileEntity (defaults to `basename(local_path)`).}

\item{contentType}{Optional MIME type (defaults to [tools::file_ext()] guess).}

\item{md5}{Logical; compute MD5 for local file and parts (requires \pkg{digest}).}

\item{overwrite}{Logical; if a file with the same name exists, update it.}

\item{description}{Optional description for the FileEntity.}

\item{annotations}{Optional named list of annotations (applied via annotations2).}

\item{token}{Optional Synapse token (PAT).}

\item{verbose}{Logical; emit progress.}

\item{dry_run}{Logical; do not execute network requests.}
}
\value{
An object of class `"syn_upload_result"` with fields:
- `file_entity_id`
- `file_handle_id`
- `upload_id`
- `md5_hex` (file MD5 if computed)
- `size_bytes`
- `etags` (list of part ETags when available)
}
\description{
Implements Synapse multipart upload:
1) Determine upload destination storage location for `parent_id`
2) Initiate multipart upload
3) Upload parts to presigned S3 URLs and `add` each part
4) Complete multipart upload to obtain a file handle ID
5) Create a new FileEntity under `parent_id` or update an existing file with the same name
6) Optionally set annotations (annotations2)
}
\examples{
\dontrun{
tmp <- tempfile(fileext = ".csv")
write.csv(data.frame(x=1:3, y=letters[1:3]), tmp, row.names = FALSE)

res <- syn_upload_file(
  local_path = tmp,
  parent_id  = "synProjectOrFolder",
  overwrite  = TRUE,
  annotations = list(stage = "raw", kind = "csv"),
  verbose = TRUE
)
res$file_entity_id
}
}
